<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grid API</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>

<body class="container">
    <header class="row">
        <h1>Grid API - How to use</h1>
    </header>
    <section class="row">
        <div class="card-group" id="info">

        </div>
    </section>
    <section class="">

    </section>
</body>
<script>
    const url = "https://api.carbonintensity.org.uk/regional/scotland";
    const infocontainer = document.getElementById('info')


    function createNode(element) {
        return document.createElement(element);
    }

    function append(parent, el) {
        return parent.appendChild(el);
    }

    function createCard(img, title, perc) {
        div = createNode('div');
        div.setAttribute('class', 'card col')
        div.innerHTML = "<img class='card-img-top' src='" + img + "'><div class='card-body'><h5 class='card-title'>" + title + "</h5><p class='card-text'>" + perc + "%</p>";
        append(info, div);
    }

    fetch(url)
        .then((resp) => resp.json())
        .then(function(info) {
            console.log(info);
            let powerGen = info.data;
            return powerGen.map(function(power) {

                i = 0;
                while (i < 9) {
                    switch (power.data[0].generationmix[i].fuel) {
                        case "wind":
                            img = "wind.jpg";
                            powerTitle = power.data[0].generationmix[i].fuel;
                            powerPercentage = power.data[0].generationmix[i].perc;
                            console.log(powerTitle + " " + powerPercentage);
                            createCard(img, powerTitle, powerPercentage);
                            break;

                        case "hydro":
                            img = "hydro.jpg";
                            powerTitle = power.data[0].generationmix[i].fuel;
                            powerPercentage = power.data[0].generationmix[i].perc;
                            createCard(img, powerTitle, powerPercentage);
                            console.log(powerTitle + " " + powerPercentage);

                            break;

                        case "solar":
                            img = "solar.jpg";
                            powerTitle = power.data[0].generationmix[i].fuel;
                            powerPercentage = power.data[0].generationmix[i].perc;
                            createCard(img, powerTitle, powerPercentage);
                            console.log(powerTitle + " " + powerPercentage);
                            break;

                        default:
                            // code block

                    }
                    i++;
                }

            })
        })
        .catch(function(error) {
            console.log(error);
        });
</script></html>
